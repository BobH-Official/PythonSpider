# é«˜ä¸€å¯’å‡çš„ç ”ç©¶æ€§å­¦ä¹ 

å½“ä»Šï¼Œäº’è”ç½‘å·²ç»å°†å…¨ä¸–ç•Œåäº¿ä¸ªäººè®¡ç®—æœºç”¨æˆ·è”ç»“åœ¨äº†ä¸€èµ·ã€‚æˆ‘ä»¬ä¸ºäº†æ›´åŠ äº†è§£äº’è”ç½‘çš„ç»„æˆä¸åŠŸèƒ½ï¼Œè¿™ä¸ªå¯’å‡ï¼Œï¼ˆä¹Ÿæœ‰ç–«æƒ…åªèƒ½å‘†åœ¨å®¶ä¸­çš„ç¼˜æ•…ï¼‰ï¼Œæˆ‘ä»¬æ‰“ç®—åˆæ­¥æ¢ç©¶äº’è”ç½‘å‰ç«¯ç½‘é¡µçš„è‡ªåŠ¨åŒ–æ“ä½œçš„å®ç°ã€‚ä¸ºäº†ç ”ç©¶çš„è¶£å‘³æ€§ä¸å®ç”¨æ€§ï¼Œæˆ‘ä»¬é€‰æ‹©ä»æœ€è¿‘å¾ˆç«çš„â€œçˆ¬è™«â€å…¥æ‰‹ï¼Œè¿›è¡Œæˆ‘ä»¬çš„ç ”ç©¶ã€‚

# ä¸¥æ­£å£°æ˜

æœ¬æ¬¡ç ”ç©¶æ€§å­¦ä¹ çš„ä¸€åˆ‡å†…å®¹ä»…ä¾›ç”¨äºå­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”ã€‚

æ–‡ç« ä»¥ CC BY-NA-SA å…±äº«ï¼Œä»£ç ä»¥ MIT License å¼€æºã€‚

-------

# æ­£æ–‡å¼€å§‹äº†

# ç ”ç©¶ç›®çš„

åˆæ­¥äº†è§£äº’è”ç½‘çˆ¬è™«ï¼Œæ„Ÿå—è®¡ç®—æœºå¸¦æ¥çš„ä¾¿æ·æ“ä½œã€‚

# ç ”ç©¶æ–¹å¼ã€æ­¥éª¤

ä½¿ç”¨Pythonçˆ¬è™«ï¼Œä¾æ¬¡å¯¹1. é™æ€ç½‘é¡µ2. åŠ¨æ€ç½‘é¡µ è¿›è¡Œâ€œå›¾ç‰‡â€çˆ¬å–ã€‚

ä½¿ç”¨Swiftç¨‹åºï¼Œå¯¹çˆ¬å–çš„å›¾ç‰‡è¿›è¡Œå¤„ç†ã€‚

1. çˆ¬å–ä¸€ä¸ªâ€œBingå¿…åº”å£çº¸å¤§å…¨â€ç½‘é¡µ
2. çˆ¬å–ä¸€ä¸ªâ€œæ¼«ç”»ç½‘é¡µâ€
3. å¯¹çˆ¬å–çš„å›¾ç‰‡è¿›è¡Œç®€å•çš„æ•´ç†å¹¶æé«˜ç”»è´¨

# Get Started

### ç¯å¢ƒ

ç”µè„‘ï¼š

> MacBook Pro (13-inch, 2017, Four Thunderbolt 3 Ports)
>
> 3.1 GHz åŒæ ¸Intel Core i5
>
> 8 GB 2133 MHz LPDDR3
>
> Intel Iris Plus Graphics 650 1536 MB
>

ç³»ç»Ÿï¼š

> macOS Catalina(10.15.3)

ç¼–è¯‘ç¯å¢ƒï¼š

> Python 3.8.0 (v3.8.0:fa919fdf25, Oct 14 2019, 10:23:27) 
>
> [Clang 6.0 (clang-600.0.57)] on darwin

### ä¸‹è½½Xcode

ä» App Store ä¸Šä¸‹è½½Xcodeå³å¯ã€‚

### å®‰è£…Python

ä»å®˜ç½‘ä¸Šä¸‹è½½ï¼š

<a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>

> ä¸‹è½½æœ€æ–°ç‰ˆ `python3` å°±å¥½ï¼Œâš ï¸æ³¨æ„ `python3` å’Œ `python2` ä¸ä¸€æ ·ï¼Œæœ¬æ–‡å…¨éƒ¨ä½¿ç”¨ `python3` ã€‚ï¼ˆæ³¨ï¼šmacOSè‡ªå¸¦`python2`ï¼Œä½†ä¹Ÿä¸æ˜¯æœ€æ–°ç‰ˆï¼‰

<img src="./img/img_python_download.png" style="zoom:60%;" />

### å®‰è£…åº“

ä½¿ç”¨`pip3`ï¼Œä¸è¦ç”¨`pip`ã€‚`pip3`å®‰è£…`Python3`æ‰è¯»å¾—åˆ°ã€‚

> `python3` è‡ªå¸¦äº†`pip3`ï¼Œä¸ç”¨åœ¨å¦å¤–ä¸‹è½½ã€‚

```
# Proj-1
$ pip3 install lxml
$ pip3 install requests
$ pip3 install selenium
```



# Proj-1ï¼šPython å›¾ç‰‡çˆ¬è™«

## å¼€å§‹å‡†å¤‡

æˆ‘ä»¬åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹è¿™ä¸ªç½‘ç«™ä¸Šæœ‰è®¸å¤šBingçš„å›¾ç‰‡ï¼Œå¾ˆé›†ä¸­ï¼Œå¾ˆé€‚åˆè‡ªåŠ¨åŒ–æ“ä½œã€‚

### çˆ¬å–çš„å†…å®¹

[https://bing.ioliu.cn/](https://bing.ioliu.cn/) ç½‘ç«™ä¸Šçš„å¿…åº”å£çº¸

ç„¶åæˆ‘ä»¬åœ¨ç½‘ä¸Šåˆæ‰¾äº†ä¸€ä¸‹ï¼ˆç½‘ä¸Šå¯»æ‰¾èµ„æ–™çš„è¿‡ç¨‹å¤ªå†—é•¿äº†ï¼Œæœ€è¿‘ä¸€æ®µæ—¶é—´â€œçˆ¬è™«â€ã€â€œPythonâ€éƒ½æ˜¯çƒ­é—¨è¯é¢˜ï¼Œæœå‡ºæ¥å¥½å¤šæ˜¯å¹¿å‘Šã€‚æ‰€ä»¥ï¼Œå…·ä½“çš„è¿‡ç¨‹å°±ä¸ç»†è¯´äº†ï¼‰ï¼Œæ‰¾åˆ°äº†æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„â€œPython åº“â€ï¼ˆç†è§£ä¸ºä¸€äº›å¼€ç®±å³ç”¨çš„â€œå·¥å…·åŒ…â€œå°±è¡Œäº†ï¼‰

### ä½¿ç”¨çš„åº“

å°±æ˜¯ä¸€äº›åˆ«äººå†™å¥½çš„å·¥å…·åŒ…å•¦ï¼Œâ€ä¸é‡å¤é€ è½®å­â€œæ˜¯åŸºæœ¬ç´ å…»ã€‚

1. etree from lxmlï¼ˆåˆ†æHTMLï¼‰
2. requestsï¼ˆè·å–æ•°æ®ï¼‰

## åˆ†æç½‘é¡µ

ç‚¹å¼€ç½‘é¡µçš„æ£€æŸ¥å™¨ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå‘ç°ä¸€å¤§å †â€œHTMLæºç â€ï¼Œè¿™äº›HTMLæè¿°äº†ç½‘é¡µçš„éª¨æ¶ã€å³ç½‘é¡µåŸºæœ¬é•¿ä»€ä¹ˆæ ·å­ï¼ˆå…·ä½“çš„ä¸€äº›ä¸œè¥¿å¾—è®©CSSï¼ˆCascading Style Sheets å±‚å æ ·å¼è¡¨ï¼‰å»æè¿°ï¼‰ã€‚

HTMLï¼Œå…¨ç§°å‘¢Hypertext Markup Languageï¼Œè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ã€‚ä½¿ç”¨çš„è¯­æ³•ç»“æ„å’ŒXMLï¼ˆExtensible Markup Languageå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰å¾ˆç›¸åƒï¼ˆæ¯•ç«Ÿå®ƒä»¬äº’ç›¸å­¦ä¹ ã€ä¸€èµ·å‘å±•ï¼‰ï¼Œå³æ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªæ ‡ç­¾ç»„æˆçš„ã€‚

ä¸ºäº†è®©è®¡ç®—æœºçŸ¥é“æˆ‘ä»¬è¦çš„æ ‡ç­¾åœ¨å“ªé‡Œï¼Œæˆ‘ä»¬é€šè¿‡æ ‡ç­¾çš„çˆ¶å­å…³ç³»æ¥ç¡®å®šæ ‡ç­¾çš„ä½ç½®ï¼Œå³ä½¿ç”¨â€œXPathâ€æ¥ç¡®å®šä½ç½®ã€‚

å…·ä½“çš„Xpathå†…å®¹ä¾¿ä¸ç»†è¯´äº†ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“æˆ‘ä»¬è¦çš„å…ƒç´ çš„Xpathæ˜¯ä»€ä¹ˆå°±è¡Œäº†ï¼Œç„¶è€Œæµè§ˆå™¨ä¸ºæˆ‘ä»¬æä¾›äº†ä¾¿åˆ©çš„æ–¹æ³•ï¼š**`å³é”® â‡’ 'Copy' â‡’ 'Copy XPath'`**

<img src="./Proj-1/img/img_copy_xpath.png"/>

é‚£ä¹ˆæˆ‘ä»¬æ­£å¼å¼€å§‹å¯¹ç½‘é¡µè¿›è¡Œåˆ†æã€‚

é¦–å…ˆæ˜¯é¡µé¢ã€‚

### é¡µé¢

ç¬¬1é¡µï¼š[https://bing.ioliu.cn/?p=1](https://bing.ioliu.cn/?p=1)

ç¬¬2é¡µï¼š[https://bing.ioliu.cn/?p=2](https://bing.ioliu.cn/?p=2)

ç¬¬3é¡µï¼š[https://bing.ioliu.cn/?p=3](https://bing.ioliu.cn/?p=3)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¿»é¡µçš„æ–¹å¼æ˜¯é€šè¿‡ `?p=` ç»™çš„å‚æ•°ï¼Œä¸€å…±120é¡µã€‚

```python
for i in range(1,121):
    urls = 'https://bing.ioliu.cn/?p={}'.format(i)
```

### å›¾ç‰‡é“¾æ¥ã€åç§°åŠç‰ˆæƒã€æ—¥æœŸ

##### ç‰ˆæƒä¿¡æ¯æ˜¯å¾ˆé‡è¦çš„ï¼Œæˆ‘ä»¬åœ¨ä¸‹è½½åï¼Œå°†ç‰ˆæƒä¿¡æ¯åŠ åœ¨æ–‡ä»¶åä¹‹å

<img src="./Proj-1/img/img_xpath_of_pic_url.png" />

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å¼•ç”¨ä¸€å¥æ•°å­¦è€å¸ˆä»¬æœ€è®¨åŒçš„è¯ï¼š

> ç”±å›¾çŸ¥ï¼š

```python
xpath_1 = '/html/body/div[3]/div[1]/div/img'
url_1 = '/html/body/div[3]/div[1]/div/img/@src'

xpath_2 = '/html/body/div[3]/div[2]/div/img'
url_2 = '/html/body/div[3]/div[2]/div/img/@src'

xpath_3 = '/html/body/div[3]/div[3]/div/img'
url_3 = '/html/body/div[3]/div[3]/div/img/@src'
```

å¯ä»¥çœ‹å‡ºï¼Œç¬¬äºŒä¸ª`<div>` çš„ Index æ˜¯è¿­ä»£çš„ã€‚

> å› æ­¤ï¼š

```python
xpath_of_pictures = '/html/body/div[3]/div/div/img'
url_of_pictures = '/html/body/div[3]/div/div/img/@src'
```

å†çœ‹å…¶ä»–å†…å®¹çš„XPathï¼š

<img src="./Proj-1/img/img_xpath_of_pic_name_and_copyright.png"/>

<img src="./Proj-1/img/img_xpath_of_pic_date.png"/>

è¿™æ—¶æˆ‘ä»¬å†å¼•ç”¨ä¸€å¥å­¦ç”Ÿä»¬ä»¬æœ€å–œæ¬¢çš„è¯ï¼š

> åŒç†å¯å¾—ï¼š

```python
xpath_of_name = '/html/body/div[3]/div/div/div[1]/h3/text()'
xpath_of_date = '/html/body/div[3]/div/div/div[1]/p[1]/em/text()'
```

------



## å¼€å§‹CODE

ç»ˆäºåˆ°ä¸Šä»£ç çš„æ—¶é—´äº†ï¼ğŸ‰

### é¦–å…ˆï¼Œæˆ‘ä»¬æ¥ä¸€ç‚¹<code>import</code>ï¼š

```python
import requests # è·å–æ–‡ä»¶
from lxml import etree # åˆ†æHTML
import time # ç”¨äºæš‚åœä¸€æ®µæ—¶é—´
import os # è°ƒç”¨ç³»ç»ŸåŠŸèƒ½
```

### è·å–å½“å‰å·¥ä½œè·¯å¾„ï¼Œç”¨äºä¿å­˜æ–‡ä»¶ï¼š

```python
root = os.getcwd() + '/'  # è¿™é‡ŒåŠ ä¸Šâ€™/â€˜æ˜¯ä¸ºäº†åé¢æ–¹ä¾¿
```

> æ‰‹åŠ¨å‚¨å­˜logï¼Œæˆ‘å–œæ¬¢è¿™ä¹ˆåšï¼Œæ–¹ä¾¿æ—¥åæŸ¥çœ‹å¤±è´¥çš„è¯·æ±‚
>```python
>logPath = root + 'log.txt'
>log = open(logPath, 'a') # æˆ‘ç”¨ç»­å†™æ¨¡å¼ï¼Œä¹Ÿå¯ä¹Ÿç”¨'w'
># å¼€å¤´å†™ä¸€äº›åˆ†éš”ç¬¦
>log.write('#############################################\n')# 
>log.write(time.strftime('%Y-%m-%d %a. %H:%M:%S',time.localtime(time.time()))) # å†™å…¥æ—¶é—´
>log.write('#############################################\n')
>
>def logprint(text):
>print(text)
>log.write(text + '\n')
>```

### ä¸»ä½“ä»£ç 

```python
for i in range(1, 121):
    # åˆ›å»ºå½“å‰é¡µé¢URL
    url = 'https://bing.ioliu.cn/?p={}'.format(i)
    # è·å–é¡µé¢
    page = getPageHTML(url)
    # åˆ¤æ–­æ˜¯ä¸æ˜¯timeout//å‡½æ•°æŠ›å‡º'timeout'
    if page == 'timeout':
        logprint('>>>>!!!!!!!BROKEN!!!!!!!\n>>>>{}\n>>>>{}\n>>>>!!!!!!!BROKEN!!!!!!!'.format(url, time.strftime('%Y-%m-%d %a. %H:%M:%S',time.localtime(time.time()))))
    else:
        # è·å–é¡µé¢ä¿¡æ¯
        dataUrl = getInfoUrl(page) # get a string
        dataName = getInfoName(page) # get a list
        dataDate = getInfoDate(page) # get a list
        #ä¾æ¬¡è·å–12å¼ å›¾ç‰‡
        for s in range(0, 12):
            # è¯»å–å›¾ç‰‡ä¿¡æ¯
            imgUrl = dataUrl[s]
            imgName = dataDate[s] + '_[' + dataName[s] + '].jpeg'
            # ä¿å­˜å›¾ç‰‡
            logprint('>>>>è·å– #ç¬¬ {} é¡µ__ç¬¬ {} å¼ '.format(i, s))
            saveImage(imgUrl=imgUrl, path = root + 'IMG/', imgName = imgName)
            # ä¼‘æ¯ 5 ç§’
            logprint('>>>>ä¼‘æ¯ 5 ç§’')
            time.sleep(5)
```

### ä¸€äº›å‡½æ•°

```python
# MARK: - Get Page HTML
def getPageHTML(url, triedNum=0, sleepTime=5, tryNum=20):
    logprint('>>>>æ­£åœ¨è®¿é—®: {}'.format(url))
    # è·å–é¡µé¢
    data = requests.get(url)
    # å¤„ç†çŠ¶æ€
    statusCode = data.status_code
    if not statusCode == 200:
        data = 'timeout'
        # ä¸è¦æ”¾å¼ƒï¼Œå†è¯•å‡ æ¬¡ï¼Œæˆ‘è®¾ç½®çš„20æ¬¡ï¼Œå¯ä»¥åœ¨å‚æ•°è®¾ç½®
        if triedNum <= tryNum:
            logprint('>>>>ä¼‘æ¯ {} ç§’'.format(sleepTime))
            time.sleep(sleepTime)
            logprint('>>>>é‡æ–°è®¿é—®: '+url+' : '+str(triedNum))
            triedNum = triedNum + 1
            getPageHTML(url=url, triedNum=triedNum, tryNum=tryNum)
        else:
            logprint('>>>>å°è¯• {} æ¬¡æ— æ•ˆ'.format(tryNum))
    return data
```

```python
# MARK:  Get Picture URL
def getInfoUrl(page):
    logprint('>>>>æ­£åœ¨è·å–URLä¿¡æ¯')
    data = page
    selector = etree.HTML(data.text)
    returnData = selector.xpath('/html/body/div[3]/div/div/img/@src')
    return returnData
# MARK:  Get Picture Name
def getInfoName(page):
    logprint('>>>>æ­£åœ¨è·å–NAMEä¿¡æ¯')
    data = page
    selector = etree.HTML(data.text)
    returnData = selector.xpath('/html/body/div[3]/div/div/div[1]/h3/text()')
    return returnData
# MARK:  Get Picture Date
def getInfoDate(page):
    logprint('>>>>æ­£åœ¨è·å–DATEä¿¡æ¯')
    data = page
    selector = etree.HTML(data.text)
    returnData = selector.xpath('/html/body/div[3]/div/div/div[1]/p[1]/em/text()')
    return returnData
######################
# æ³¨æ„XPathï¼ŒæŠŠé€’å½’çš„éƒ¨åˆ†åˆ å»ï¼Œetree ä¼šè‡ªå·±é€’å½’ï¼Œç„¶åè¿”å›ä¸€ä¸ªlist
# åé¢ä¸¤ä¸ªåˆ†å¼€å†™äº†ï¼Œè¿™æ ·æ¸…æ¥šä¸€äº›
```

```python
# MARK: - Save Image
def saveImage(imgUrl, path, imgName):
    if not os.path.exists(path):  # åˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯å¦å·²ç»å­˜åœ¨
        os.makedirs(path)
    imgPath = path + imgName
    if not os.path.exists(imgPath):  # åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨
        img = requests.get(imgUrl).content # è·å–æ–‡ä»¶çš„äºŒè¿›åˆ¶ç¼–ç 
        file = open(imgPath, "wb") # ç”¨äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€
        file.write(img) # ç›´æ¥å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶
        logprint('>>>>file #' + imgName + ' written')
    else:
        logprint('>>>>file #' + imgName + ' already exists')
```

ç†è®ºä¸Šï¼Œè¿™å°±åº”è¯¥èƒ½è·‘äº†ã€‚

å¯æ˜¯ç°å®æ˜¯æ®‹é…·çš„ã€‚

ä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œcopyright é‡Œé¢ç«Ÿç„¶æœ‰ä¸ª`/`ã€‚å»è®¿è¾¾é‡Œçœ‹çœ‹ï¼Œä¼šå‘ç°ä¸€ä¸ªç¥å¥‡çš„äº‹æƒ…ï¼Œ<img src="./Proj-1/img/img_slash.png" style="zoom:35%;" /> ï¼Œè®¿è¾¾æ€ä¹ˆä¼šæ”¯æŒè¿™ç§ä¸œä¸œï¼ï¼Ÿ

åœ¨`Terminal`é‡Œé¢`ls`çœ‹ä¸€ä¸‹ï¼Œå®ƒåŸæ¥é•¿è¿™æ ·`./bing:wallpapers.py`ï¼Œå†å»è®¿è¾¾é‡ŒæŠŠæ–‡ä»¶å‘½åä¸º`:`ï¼Œä½ ä¼šç¥å¥‡çš„å‘ç°è¿™æ˜¯éæ³•æ“ä½œã€‚

ä¸ºäº†æ–¹ä¾¿ï¼Œäºæ˜¯æˆ‘ä»¬å¹²è„†æŠŠæ­£æ–œæ `/`æ¢æˆåæ–œæ `\`ï¼Œé¡ºä¾¿æŠŠ`Â©`æ¢æˆ`(c)`ï¼š

```python
name = dataDate[s] + '_[' + dataName[s] + '].jpeg'
# å¤„ç†åå­—é‡Œçš„ä¸åˆæ³•å­—ç¬¦
imgName = ''
for x in name:
	if not x == '/' and not x == 'Â©':
		imgName = imgName + x
	elif x == '/':
		imgName = imgName + '\\'
	elif x == 'Â©':
        imgName = imgName + '(c)'
```



# Proj-2ï¼šçˆ¬å–åŠ¨æ€ç½‘é¡µ

ç”±äºæ²¡æœ‰æ‰¾åˆ°å…¶ä»–ç‰¹åˆ«å¥½çš„ç½‘ç«™ï¼Œåªå¥½ä½¿ç”¨ä¸€ä¸ªåŠ¨ç”»ç½‘ç«™ã€‚**æˆ‘ä»¬æ”¯æŒæ­£ç‰ˆï¼Œä¿æŠ¤ä½œè€…æƒåˆ©ã€‚ä»¥ä¸‹ä»£ç ä»…ç”¨äºå­¦ä¹ ç›®çš„**

### çˆ¬å–ç½‘é¡µ

â€œhttp://www.mangabz.com/287bz/â€ çš„å…¶ä¸­å‡ è¯ã€‚

## åˆ†æç½‘é¡µ

ç¬¬ä¸€é¡µæ˜¯ç›®å½•ï¼Œæ˜¯ä¸€å¼ é™æ€ç½‘é¡µã€‚

ç„¶è€Œåˆ°äº†æ¼«ç”»é¡µé¢æ˜¯åŠ¨æ€åŠ è½½çš„ã€‚

å¯¹äºåŠ¨æ€é¡µé¢ï¼Œä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š

1. çˆ¬å–ç½‘é¡µåï¼ŒåŠ è½½æœ‰å…³ JavaScript æ–‡ä»¶ï¼›
2. åŠ¨æ€åŠ è½½å®Œæ‰€æœ‰å†…å®¹åï¼Œå†çˆ¬å–ç½‘é¡µã€‚

åè€…æ˜æ˜¾æ˜¯ç®€å•æ–¹æ³•ï¼Œè™½ç„¶æ˜¯æ…¢äº†ä¸€ç‚¹ç‚¹ã€‚

### ä½¿ç”¨çš„åº“

1. etree from lxmlï¼ˆåˆ†æHTMLï¼‰
2. requestsï¼ˆè·å–æ•°æ®ï¼‰
3. webdriver from seleniumï¼ˆç½‘é¡µè‡ªåŠ¨åŒ–æ“ä½œå·¥å…·ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨æµè§ˆå™¨ï¼Œä»¥è¾¾åˆ°è‡ªåŠ¨åŠ è½½çš„ç›®çš„ï¼‰

### ç›®å½•é¡µé¢

<img src="./Proj-2/images/img_content.png" />

æˆ‘ä»¬éœ€è¦è·å–æ¯ä¸€è¯çš„â€œé“¾æ¥â€ã€â€œåç§°â€ã€â€œé¡µæ•°â€ã€‚

```python
xpath_url = '/html/body/div[5]/div[2]/a/@href')
xpath_names = '/html/body/div[5]/div[2]/a/text()')
xpath_pagenums = '/html/body/div[5]/div[2]/a/span/text()')
```

### æ¼«ç”»é¡µé¢

<img src="./Proj-2/images/img_hua.png" />

 æˆ‘ä»¬éœ€è¦å–å¾—å½“å‰`page`çš„â€œé¡µæ•°â€ã€â€œåç§°â€ã€å’Œå½“å‰å›¾ç‰‡çš„â€œURLâ€

```python
xpath_img = '//*[@id="cp_image"]/@src'
xpath_pageNum = '//*[@id="lbcurrentpage"]/text()'
xpath_pageName = '/html/body/div[1]/div/div/p/text()'
```

æ¯ä¸€å¼ çš„ç¿»é¡µçš„å®ç°ï¼š

ç¬¬1é¡µï¼š<a href="http://www.mangabz.com/m21739/#ipg1" >http://www.mangabz.com/m21739/#ipg1</a>

ç¬¬2é¡µï¼š<a href="http://www.mangabz.com/m21739/#ipg2" >http://www.mangabz.com/m21739/#ipg2</a>

ç¬¬3é¡µï¼š<a href="http://www.mangabz.com/m21739/#ipg3" >http://www.mangabz.com/m21739/#ipg3</a>

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¿»é¡µçš„æ–¹å¼æ˜¯é€šè¿‡ `#ipg?` ç»™çš„å‚æ•°ï¼Œä¸€å…±`chapterTotalPages`é¡µã€‚

```python
for currentPageIndex in range(chapterTotalPages):
    currentPageURL = 'http://www.mangabz.com/' + chapterURL + '/#ipg{}'.format(currentPageIndex)
```

------

## å¼€å§‹CODE

ç»ˆäºåˆ°ä¸Šä»£ç çš„æ—¶é—´äº†ï¼ğŸ‰

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥ä¸€ç‚¹<code>import</code>ï¼š

```python
import requests # è·å–æ–‡ä»¶
from lxml import etree # åˆ†æHTML
import time # ç”¨äºæš‚åœä¸€æ®µæ—¶é—´
import random # éšæœºæ•°ç”Ÿæˆ
import os # è°ƒç”¨ç³»ç»ŸåŠŸèƒ½
from selenium import webdriver # è‡ªåŠ¨æ“ä½œå·¥å…·webdriver
```
#### è·å–å½“å‰å·¥ä½œè·¯å¾„ï¼Œç”¨äºä¿å­˜æ–‡ä»¶ï¼š

```python
root = os.getcwd() + '/'  # è¿™é‡ŒåŠ ä¸Šâ€™/â€˜æ˜¯ä¸ºäº†åé¢æ–¹ä¾¿
if not os.path.exists(root + 'bilibili/'):
    os.mkdir(root + 'bilibili/')
if not os.path.exists(root + 'bilibili/content/'):
    os.mkdir(root + 'bilibili/content/')
```

> æ‰‹åŠ¨å‚¨å­˜logï¼Œæˆ‘å–œæ¬¢è¿™ä¹ˆåšï¼Œæ–¹ä¾¿æ—¥åæŸ¥çœ‹å¤±è´¥çš„è¯·æ±‚
> ```python
> logPath = root + 'log.txt'
> log = open(logPath, 'a') # æˆ‘ç”¨ç»­å†™æ¨¡å¼ï¼Œä¹Ÿå¯ä¹Ÿç”¨'w'
> # å¼€å¤´å†™ä¸€äº›åˆ†éš”ç¬¦
> log.write('#############################################\n')# 
> log.write(time.strftime('%Y-%m-%d %a. %H:%M:%S',time.localtime(time.time()))) # å†™å…¥æ—¶é—´
> log.write('#############################################\n')
> 
> def logprint(text):
> 	print(text)
> 	log.write(text + '\n')
> 
> #å‚¨å­˜é”™è¯¯
> brokenLogPath = root + 'bilibili/bilibiliBrokenLog.txt'
> brokenLog = open(brokenLogPath, "a")
> brokenLog.write('\n')
> brokenLog.write('@@@@@@START@@@@@@\n')
> def saveBrokenLog(url, chapterNum=-1, pageNum=-1, chapterName=''):
>     logprint('>>>>å­˜å…¥ bilibiliBrokenLog.txt')
>     logprint('!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n')
>     brokenLog.write('--------------------------------------------------------------------------------\n')
>     brokenLog.write('--------------------------------------------------------------------------------\n')
>     if not chapterNum == -1 and not chapterName == '':
>         brokenLog.writelines(
>             '>>>>>>>> #' + str(chapterNum) + ' #' + chapterName)
>     if not pageNum == -1:
>         brokenLog.writelines('>>>>>>>> #'+str(pageNum))
>     brokenLog.writelines('>>>>>>>> #' + url)
>     brokenLog.write('--------------------------------------------------------------------------------\n')
>     brokenLog.write('--------------------------------------------------------------------------------\n')
>     brokenLog.write('\n')
>     brokenLog.write('\n')
> 
> #å‚¨å­˜è·å–çš„æ¯ä¸€é¡µçš„æ•°æ®
> pageLogPath = root + 'bilibili/bilibiliPageLog.txt'
> pageLog = open(pageLogPath, "w")
> pageLog.write('\n')
> pageLog.write('@@@@@@START@@@@@@\n')
> ```

#### ä¸»ä½“ä»£ç ï¼Œä¸»è¦çš„é€»è¾‘éƒ¨åˆ†
â€œè¯â€ æˆ‘ç”¨ â€œchapterï¼ˆç« èŠ‚ï¼‰â€æ¥ä»£æ›¿

```python
# æ‰“å¼€webdriverï¼Œè¿™é‡Œç”¨çš„æ˜¯FireFoxï¼ˆä¹Ÿæ¨èä½¿ç”¨Safariï¼‰
driver = webdriver.Firefox(executable_path='path/to/your/geckodriver')
# å¼€å§‹
logprint('@@@@@@START@@@@@@')
# è·å–ç›®å½•é‡Œçš„å…¨éƒ¨é¡µé¢ä¿¡æ¯ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªliståµŒå¥—çš„list
allChapter = getAllPages(driver=driver)
# å‡†å¤‡åŸºç¡€çš„URL
URL_b = 'http://www.mangabz.com/'
# åˆ¤æ–­æ˜¯å¦æœ‰è¿”å›
if allChapter == ['timeout']:
    saveBrokenLog(url='none is got')
else:
    # è·å–æ¯ä¸€è¯ï¼ˆchapterï¼‰
    for ss in range(0, 5): # è±¡å¾æ€§çš„åªè·å– 5 ä¸ª
        currentChapter = allChapter[ss]
        # å¤„ç†è¿™ä¸€è¯çš„URL
        chapterURLhref = currentChapter[2]
        chapterURL = ''
        # è¦æŠŠå¤šä½™çš„'/'åˆ å»ï¼Œæ²¡æœ‰åœ¨è·å–çš„æ—¶å€™åˆ æ˜¯ä¸ºäº†å‡½æ•°é‡Œçš„ä»£ç æ›´æ¸…æ™°ä¸€ç‚¹
        for i in chapterURLhref:
            if not i == '/':
                chapterURL += i
        # è·å–å…¶ä»–ä¿¡æ¯
        chapterTotalPages = currentChapter[3] # æ€»é¡µæ•°
        chapterName = currentChapter[1] # è¯åç§°
        chapterNum = currentChapter[0] # è¯çš„ç¼–å·
        # è·å–æ¯ä¸€ä¸ªå•é¡µ
        for currentPageIndex in range(chapterTotalPages):
            currentPageIndex += 1 # listæ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥è¿™é‡Œè¦è½¬æ¢ä¸€ä¸‹
            # å½“å‰â€œé¡µâ€çš„URL
            currentPageURL = URL_b + chapterURL + '/#ipg{}'.format(currentPageIndex)
            logprint('######## '+str(currentPageIndex)+'  '+currentPageURL)
            # è·å–å½“å‰â€œé¡µâ€çš„ä¿¡æ¯
            info = getInfo(currentPageURL, driver)
            currentImgURL = info[1]
            currentImgNum = info[0]
            currentImgName = info[2]
            # æ‰“å°æ¯ä¸€é¡µçš„æ•°æ®
            logprint('>>>>å½“å‰ç« å: #' + currentImgName)
            logprint('>>>>å½“å‰é¡µæ•°: #' + str(currentImgNum))
            logprint('>>>>å½“å‰URL: #' + str(currentImgURL))
            if currentImgURL == 'timeout':
                logprint('>>>>è·å–é¡µé¢å¤±è´¥')
                saveBrokenLog(currentImgURL, chapterNum, currentPageIndex, currentImgName)
            else:
                # å‚¨å­˜è·¯å¾„çš„åˆ›ç«‹
                chapterRootPath = root + 'bilibili/content/' + str(chapterNum) + '-' + currentImgName+'/'
                if not os.path.exists(chapterRootPath):
                    os.mkdir(chapterRootPath)
                    logprint('>>>>ç« èŠ‚è·¯å¾„: #{} åˆ›å»ºå¥½äº†'.format(chapterRootPath))
                # åˆ¤æ–­æ˜¯ç¼–å·æ˜¯å¦ä¸€è‡´ï¼Œä»¥å…é”™è¯¯çš„å‡ºç°
                if currentPageIndex == currentImgNum:
                    logprint('>>>>åºå·æ˜¯ä¸€è‡´çš„')
                else:
                    logprint('>>>>åºå·ä¸ä¸€è‡´')
                # æ–‡ä»¶è·¯å¾„
                fileName = str(chapterNum) + '-' + str(currentImgName) + '_p_' + str(currentPageIndex)+'.jpeg'
                imgPath = chapterRootPath + fileName
                # æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œä¸è¦é‡å¤è·å–
                if os.path.exists(imgPath):
                    logprint('>>>>file #{} already existed'.format(fileName))
                else:
                    # è·å–å›¾ç‰‡
                    saveImage(currentImgURL, imgPath, fileName)
        # ä¸‹ä¸€è¯
        logprint('--------------------------------------------------------------------------------')
        logprint('--------------------------------------------------------------------------------')
        logprint('######NEXT######')
        logprint('--------------------------------------------------------------------------------')
# ç»“æŸäº†ï¼Œé€€å‡º
driver.close()
brokenLog.write('@@@@@@OVER@@@@@@')
logprint('@@@@@@OVER@@@@@@')
```

#### ä¸€äº›å‡½æ•°
##### è·å–é¡µé¢

```python
def getPage(url, driver, tryNum=0):
    print('>>>>æ­£åœ¨è®¿é—®: {}'.format(url))
    # è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†webdriver
    driver.get(url)
    # ç­‰å¾…åŠ¨æ€åŠ è½½ï¼Œç½‘é€Ÿä¸å¥½çš„å¯ä»¥ç­‰çš„æ—¶é—´é•¿ä¸€ç‚¹
    logprint(">>>>ç¡ 5 ç§’")
    time.sleep(5)
    data = driver.page_source
    dataInfo = etree.HTML(data)
    # è¿™é‡Œæ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯404ï¼Œç”±äºç”¨äº†webdriverï¼Œæ‰‹åŠ¨åˆ¤æ–­ä¼šæ–¹ä¾¿ä¸€ç‚¹
    is404 = dataInfo.xpath('/html/body/div[3]/img/@class')
    logprint(">>>>å¾—åˆ° #{}".format(url))
    if is404 == ['img-404']:
        data = 'timeout'
        # å°è¯• 20 æ¬¡
        if tryNum <= 20:
            logprint('>>>>ä¼‘æ¯10s')
            time.sleep(10)
            logprint('>>>>é‡æ–°è®¿é—®: '+url+' : '+str(tryNum))
            tryNum = tryNum + 1
            getPage(url=url, driver=driver, tryNum=tryNum) # è¿™é‡Œæœ‰ä¸ªè¿­ä»£
        else:
            logprint('>>>>å°è¯•20æ¬¡æ— æ•ˆ')
    return data # driver.page_sourceï¼Œæˆ–'timeout'ï¼ˆæˆ‘å…¨éƒ¨ä½¿ç”¨å­—ç¬¦ä¸²'timeout'æ¥è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œæ–¹ä¾¿ä¸€ç‚¹ï¼‰
```

##### è·å–å…¨éƒ¨é¡µé¢ä¿¡æ¯

```python
def getAllPages(driver):
    url = 'http://www.mangabz.com/287bz/' # å†™æ­»çš„
    data = getPage(url=url, driver=driver)
    # è¿›è¡Œé”™è¯¯åˆ¤æ–­
    if not data == 'timeout':
        æŠŠæ•°æ®äº¤ç»™etree
        selector = etree.HTML(data)
        è·å–ä¿¡æ¯
        urls = selector.xpath('/html/body/div[5]/div[2]/a/@href')
        names = selector.xpath('/html/body/div[5]/div[2]/a/text()')
        pagenums = selector.xpath('/html/body/div[5]/div[2]/a/span/text()')
        nums = []
        returnData = []
        # å¤„ç†é¡µé¢ç¼–å·ï¼Œå¾—æŠŠå®ƒè¿‡æ»¤å‡ºæ¥å¹¶ä» str æ”¹åˆ° int
        count = 0
        for s in pagenums:
            a = ''
            count += 1
            # ç®€å•æ–¹æ³•ï¼Œç¡¬ä¸Š
            for i in s:
                if i == '1' or i == '2' or i == '3' or i == '4' or i == '5' or i == '6' or i == '7' or i == '8' or i == '9' or i == '0':
                    a += i
            a = int(a)
            nums.append(a)
        for i in range(count + 1):
            i = i - 1
            pageLog.write('>>>>>>>>>>>>>>>>>>>>\n')
            pageLog.write('####' + str(i+1)+names[i]+urls[i]+str(nums[i])+'\n')
            pageLog.write('\n')
            returnData.append([i + 1, names[i], urls[i], nums[i]])
            # name is a string, url is a string, nums is a int which refers to how many pages this chapter got, the first one is the chapter's id
    else:
        returnData = ['timeout']
    return(returnData) # è¿”å›ä¸€ä¸ªlistï¼Œæˆ–'timeout'
```

##### è·å–æ¯ä¸€â€œé¡µâ€çš„ä¿¡æ¯

```python
def getInfo(url, driver, tryNum=0):
    logprint('>>>>æ­£åœ¨è·å–é¡µé¢ä¿¡æ¯')
    data = getPage(url=url, driver=driver)
    # è¿›è¡Œé”™è¯¯å¤„ç†
    if data == 'timeout':
        logprint('data of getinfo is timeout')
        imgURL = 'timeout'
        pageNum = 404
        pageName = 'timeout'
    else:
        # æŠŠæ•°æ®äº¤ç»™etree
        selector = etree.HTML(data)
        imgURL = selector.xpath('//*[@id="cp_image"]/@src')
        # å¦‚æœæ˜¯åŠ è½½å‡ºäº†é—®é¢˜ï¼Œå›¾ç‰‡è¿˜æ²¡æœ‰åŠ è½½å‡ºæ¥ï¼Œä¸è¦æ°”é¦ï¼Œå†è¯•å‡ æ¬¡
        if imgURL == []:
            if tryNum <= 20:
                logprint('>>>>é‡æ–°è·å–é¡µé¢: '+url+' : '+str(tryNum))
                tryNum = tryNum + 1
                imgURL = 'timeout'
                getInfo(url=url, driver=driver, tryNum=tryNum) # è¿­ä»£è‡ªå·±
            else:
                logprint('>>>>å°è¯• 20 æ¬¡æ— æ•ˆ')
                imgURL = 'timeout'
                pageNum = 404
                pageName = 'timeout'
                saveBrokenLog(url)
        else:
            imgURL = imgURL[0] # æŠŠURLä» list è½¬ä¸º strï¼ˆæ„Ÿè°¢å¼±ç±»å‹ï¼‰
        # è·å–å½“å‰çš„é¡µç 
        pageNum = selector.xpath('//*[@id="lbcurrentpage"]/text()')[0] # list è½¬ str
        pageNum = int(pageNum) # str è½¬ int
        pageName = selector.xpath('/html/body/div[1]/div/div/p/text()')[0]
        # æŠŠç©ºç™½å­—ç¬¦å¤„ç†æ‰
        pageName.replace('\s', '')
        abcd = ''
        for i in pageName:
            if not i == '\t':
                if not i == ' ':
                    abcd += i
        pageName = abcd
        # 
        logprint('>>>> #' + str(pageNum))
        logprint('>>>> #' + pageName)
        logprint('>>>> #' + imgURL)
    return [pageNum, imgURL, pageName]
```
##### è·å–å›¾ç‰‡

```python
def saveImage(imgUrl, path, name):
    img = requests.get(imgUrl, headers=header)
    img = img.content
    file = open(path, "wb") # äºŒè¿›åˆ¶è¾“å…¥
    file.write(img)
    logprint('>>>>file #'+name + 'written>>>>>>>')
```



# Proj-3ï¼šæ‰¹é‡å¤„ç†è·å–çš„å›¾ç‰‡

å¥½äº†ï¼Œæˆ‘ä»¬è¦æ‰“å¼€Xcodeäº†ã€‚

æˆ‘ä»¬å¯¹å›¾ç‰‡è¿›è¡Œåˆ†ç±»å’Œæé«˜ç”»è´¨çš„å¤„ç†ã€‚

åˆ›å»ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å°±å¥½äº†ã€‚

<img src="./Proj-2/images/img_xcode_start.png" />

### Swift è¿è¡Œâ€œå‘½ä»¤è¡Œå·¥å…·â€

è¿™æ®µä»£ç æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥å¯¹äºæˆ‘ä»¬è¿™ä¸ªç¨‹åºå¯èƒ½æœ‰å†—ä½™çš„éƒ¨åˆ†ã€‚

```swift
import Foundation

// MARK: ErroRs
/// This is a customized error enum. It has type of (.allGood), (.notFound), (.httpError)
enum ERRoR: Error {
    case allGood
    case notFound(String)
    case httpError(Int, String)
}

// MARK: runCommand
/// This function will return the command's output,  the  state code and throw  an  ERRoR state
func runCommand(_ bin: String, isPrint: Bool = false, arguments: [String], runtime: Int = 1) throws -> (String, Int) {
    let pipe = Pipe()
    let file = pipe.fileHandleForReading
    var launchPath = bin
    
    if launchPath.first != "/" || launchPath != "/usr/bin/which" {
        launchPath = try! runCommand("/usr/bin/which", arguments: [launchPath], runtime: 2).0
    }
    
    if launchPath.isEmpty || launchPath.first != "/" {
        throw ERRoR.notFound("command not found")
    } else {
        if launchPath.last == "\n" {
            launchPath = String(launchPath.dropLast())
        }
        let task = Process()
        task.launchPath = launchPath
        task.arguments = arguments
        task.standardOutput = pipe
        try! task.run()
        task.waitUntilExit()

        let data = file.readDataToEndOfFile()
        if runtime == 1, isPrint {
            print(String(data: data, encoding: String.Encoding.utf8)!)
        }
        var returnString = String(data: data, encoding: String.Encoding.utf8)!
        if returnString.last == "\n" {
            returnString = String(returnString.dropLast())
        }
        return (returnString, Int(task.terminationStatus))
    }
}

```

### ä¸»ä½“ä»£ç 

```swift
import Foundation

print("@@@@@@START@@@@@@")

// Basic Settings
let FManager = FileManager.default

//ç›®å½• #1: ./bilibili/content/
let rootPath = "./bilibili/content/"
let rootURL = URL(fileURLWithPath: rootPath)
let pianPathSet = try! FManager.contentsOfDirectory(atPath: rootURL.path)
// ç¬¬ä¸€æ¬¡å¾ªç¯, ./bilibili/content/, è·å–â€œç¯‡â€
for pianSubPath in pianPathSet {
    if pianSubPath != ".DS_Store" { //æ’é™¤ #ç³»ç»Ÿæ–‡ä»¶
        //ç›®å½• #2: ./bilibili/content/
        let pianPath = rootPath + pianSubPath
        let pianURL = URL(fileURLWithPath: pianPath)
        let volPathSet = try! FManager.contentsOfDirectory(atPath: pianURL.path)
        // ç¬¬äºŒæ¬¡å¾ªç¯ï¼Œ./bilibili/content/ç¯‡*, è·å–â€œè¯â€
        for volSubPath in volPathSet {
            if volSubPath != ".DS_Store" {
                let volPath = pianPath + "/" + volSubPath
                let volURL = URL(fileURLWithPath: volPath)
                let chapterPathSet = try! FManager.contentsOfDirectory(atPath: volURL.path)
                // ç¬¬ä¸‰æ¬¡å¾ªç¯, ./bilibili/content/ç¯‡*/è¯*, è·å–"é¡µ"
                for chapterSubPath in chapterPathSet {
                    if chapterSubPath != ".DS_Store" {
                        let chapterPath = volPath + "/" + chapterSubPath
                        let chapterURL = URL(fileURLWithPath: chapterPath)
                        var chapterNameS: String = ""
                        var chapterNameT: String = ""
                        var isRecordHua: Bool = false
                        //è®°å½•â€œè¯â€
                        for i in chapterSubPath {
                            if i == "ç¬¬", !isRecordHua {
                                isRecordHua = true
                            }
                            if isRecordHua {
                                chapterNameS += String(i)
                                //è½¬åŒ–ä¸ºç®€ä½“
                                if i == "è¯" {
                                    chapterNameT += "è©±"
                                } else {
                                    chapterNameT += String(i)
                                }
                            }
                            if isRecordHua, i == "è¯" || i == "è©±" {
                                isRecordHua = false
                                break
                            }
                        }
                        let inpagePathSet = try! FManager.contentsOfDirectory(atPath: chapterURL.path)
                        // ç¬¬å››æ¬¡å¾ªç¯,./bilibili/content/ç¯‡*/è¯*/"é¡µ", è·å–æ¯ä¸€å¼ å›¾ç‰‡
                        for pageIndex in 0 ..< inpagePathSet.count {
                            let inputPath = chapterPath + "/" + inpagePathSet[pageIndex]
                            // è¾“å‡ºç›®å½•
                            //åŠ ä¸Šâ€œç¯‡â€œ
                            var outRootPath = "./bilibili/already/" + pianSubPath + "/"
                            if !FManager.fileExists(atPath: outRootPath) {
                                _ = try! runCommand("mkdir", arguments: ["\(outRootPath)"])
                            }
                            //åŠ ä¸Šâ€å·â€œ
                            outRootPath += "/" + volSubPath
                            if !FManager.fileExists(atPath: outRootPath) {
                                _ = try! runCommand("mkdir", arguments: ["\(outRootPath)"])
                            }
                            //åŠ ä¸Šâ€è¯â€œ
                            outRootPath += "/" + chapterSubPath
                            if !FManager.fileExists(atPath: outRootPath) {
                               _ = try! runCommand("mkdir", arguments: ["\(outRootPath)"])
                            }
                            //åŠ ä¸Šâ€œé¡µâ€
                            let outPath = outRootPath + "/" + "\(chapterNameS)_p\(pageIndex + 1).png" //ç®€ä½“
                            // å¼€å§‹å¤„ç†
                            print("########################################")
                            // ä¸è¦é‡å¤å¤„ç†
                            if FManager.fileExists(atPath: outPath) {
                                print("##########FILE ALREADY EXISTED##########")
                                print(outPath)
                            } else if FManager.fileExists(atPath: outPathT) {
                                print("##########FILE ALREADY EXISTED##########")
                                print(outPath)
                                let exeNameChange = try! runCommand("mv", arguments: [outPathT, outPath]).1
                                if exeNameChange == 0 {
                                    print("##########FILE NAME is CHANGED##########")
                                } else {
                                    print("!!!!!!!!!!NAME  CHANGE  FAILED!!!!!!!!!!")
                                }
                            } else {
                                print(inputPath)
                                // è¿™é‡Œè°ƒç”¨äº†ä¸€ä¸ªå¼€æºè½¯ä»¶
                                let exe = try! runCommand("/Users/HUi/bin/waifu2x", arguments: ["--type", "a", "--scale", "2", "--noise", "4", "--input", inputPath, "--output", outPath])
                                print(exe)
                            }
                        }
                    }
                }
            }
        }
    }
}

print("@@@@@@OVER@@@@@@")
```

> ä»£ç é‡ç”¨åˆ°äº†ä¸€ä¸ªâ€œwaifu2xâ€çš„å¼€æºè½¯ä»¶ï¼Œæ˜¯Metalåšçš„macOSç‰ˆæœ¬çš„ï¼ŒåŸä½œæ˜¯winä¸“ç”¨çš„ã€‚
>
> æœ¬æ¬¡ç”¨åˆ°çš„ï¼šhttps://github.com/safx/waifu2x-metalï¼ˆåªç”¨åˆ°äº†ç¼–è¯‘å¥½çš„ç¨‹åºï¼Œæ²¡ç”¨ç”¨åˆ°ä»£ç ï¼‰
>
> åŸä½œï¼šhttps://github.com/nagadomi/waifu2x



# æ€»ç»“

æˆ‘ä»¬ç€é‡ç ”ç©¶äº†äº’è”ç½‘çˆ¬è™«ä»¥åŠæ•°æ®å¤„ç†çš„ç›¸å…³åº”ç”¨ï¼Œæ˜¯åˆæ³•çš„åº”ç”¨ï¼Œå› ä¸ºçˆ¬è™«çš„åº”ç”¨åŒæ ·å¯ä»¥é€ æˆå±å®³ã€‚

1. äº†è§£äº†äº’è”ç½‘ç½‘é¡µçš„åŸºæœ¬æ¶æ„ï¼Œå¯¹æˆ‘ä»¬çœ¼å‰çš„ç»šä¸½ç½‘é¡µæœ‰äº†æ›´æœ¬è´¨çš„äº†è§£ï¼›

2. å¯¹æ•°æ®è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ„è¯†åˆ°ç§‘æŠ€ã€è‡ªåŠ¨åŒ–å¸¦æ¥çš„ä¾¿åˆ©ï¼Œä¹Ÿè®¤è¯†åˆ°å…¶ä¸­å¯èƒ½å­˜åœ¨çš„å±å®³ï¼ˆæ¯”å¦‚ä¾µå®³ä»–äººç‰ˆæƒã€å¯¼è‡´æœåŠ¡å™¨å˜æ…¢ï¼‰ã€‚

3. ä½¿æˆ‘ä»¬æ›´åŠ æ„è¯†åˆ°ï¼Œç§‘æŠ€çš„å‘å±•æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œæˆ‘ä»¬åº”å½“æ›´å¥½çš„åˆ©ç”¨ç§‘æŠ€æ¥ä¸ºäººä»¬æœåŠ¡ï¼Œç§‘æŠ€çš„æœ€ç»ˆç›®çš„æ˜¯é€ ç¦äººç±»ã€‚ä½œä¸ºä½¿ç”¨è€…ï¼Œåº”è¯¥å¥å…¨æ³•å¾‹æ„è¯†ï¼Œåˆç†ä½¿ç”¨æŠ€æœ¯ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œåº”è¯¥é¢‘ç¹æ£€æŸ¥ä¿®ç†å¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼Œç¡®ä¿è½¯ä»¶æ¶æ„çš„å®‰å…¨å®Œæ•´æ€§ã€‚ä½œä¸ºæ”¿ç­–åˆ¶å®šçš„äººï¼Œåº”è¯¥æ˜ç¡®éœ€æ±‚ï¼Œåˆç†åˆ¶å®šç›¸å…³æ³•è§„ã€‚